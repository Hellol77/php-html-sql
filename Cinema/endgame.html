<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <title>ticketing</title>
  </head>
  <body>
    <header>
      <h2><a href="main.html">Marvel Cinema</a></h2>
      <nav>
        <ul>
          <li><a href="select.html">영화 예매</a></li>
          <li><a href="intro.html">영화 소개</a></li>
          <li><a href="reservation.html">예매 확인 및 취소</a></li>
        </ul>
      </nav>
    </header>
    <div class="ticketing">
      <div class="ticketing_title">
        <img src="media/endgame.jpg" alt="endgame" />
        <div><h1>어벤져스:엔드게임</h1></div>
      </div>
      <form>
        <div class="ticketing_form">
          <div class="ticketing_input">
            <div class="ticketing_info">
              <input
                id="movie_name"
                type="text"
                value="어벤져스:엔드게임"
                readonly
              />
              <input
                id="date_movie"
                type="datetime-local"
                value="2021-11-19T00:00"
                min="2021-11-18T00:00"
              />
              <input
                id="num"
                type="number"
                value="2"
                placeholder="인원"
                min="1"
                max="4"
              />
				<div class="ticketing_info_text">한 명당 요금은 8000원 입니다.</div>
            </div>
          </div>
          <div class="ticketing_table">
            <table>
              <span class="table_span">SCREEN</span>
              <tr>
                <td><input id="1-1" type="checkbox" value="1-1" onclick="check(this.id)"/>1-1</td>
                <td><input id="1-2" type="checkbox" value="1-2" onclick="check(this.id)"/>1-2</td>
                <td><input id="1-3" type="checkbox" value="1-3" onclick="check(this.id)"/>1-3</td>
                <td><input id="1-4" type="checkbox" value="1-4" onclick="check(this.id)"/>1-4</td>
                <td><input id="1-5" type="checkbox" value="1-5" onclick="check(this.id)"/>1-5</td>
                <td><input id="1-6" type="checkbox" value="1-6" onclick="check(this.id)"/>1-6</td>
                <td><input id="1-7" type="checkbox" value="1-7" onclick="check(this.id)"/>1-7</td>
                <td><input id="1-8" type="checkbox" value="1-8" onclick="check(this.id)"/>1-8</td>
              </tr>
              <tr>
                <td><input id="2-1" value="2-1" type="checkbox"  onclick="check(this.id)"/>2-1</td>
                <td><input id="2-2" value="2-2" type="checkbox"  onclick="check(this.id)"/>2-2</td>
                <td><input id="2-3" value="2-3" type="checkbox"  onclick="check(this.id)"/>2-3</td>
                <td><input id="2-4" value="2-4" type="checkbox"  onclick="check(this.id)"/>2-4</td>
                <td><input id="2-5" value="2-5" type="checkbox"  onclick="check(this.id)"/>2-5</td>
                <td><input id="2-6" value="2-6" type="checkbox"  onclick="check(this.id)"/>2-6</td>
                <td><input id="2-7" value="2-7" type="checkbox"  onclick="check(this.id)"/>2-7</td>
                <td><input id="2-8" value="2-8" type="checkbox"  onclick="check(this.id)"/>2-8</td>
              </tr>
              <tr>
                <td><input id="3-1" value="3-1" type="checkbox"  onclick="check(this.id)"/>3-1</td>
                <td><input id="3-2" value="3-2" type="checkbox"  onclick="check(this.id)"/>3-2</td>
                <td><input id="3-3" value="3-3" type="checkbox"  onclick="check(this.id)"/>3-3</td>
                <td><input id="3-4" value="3-4" type="checkbox"  onclick="check(this.id)"/>3-4</td>
                <td><input id="3-5" value="3-5" type="checkbox"  onclick="check(this.id)"/>3-5</td>
                <td><input id="3-6" value="3-6" type="checkbox"  onclick="check(this.id)"/>3-6</td>
                <td><input id="3-7" value="3-7" type="checkbox"  onclick="check(this.id)"/>3-7</td>
                <td><input id="3-8" value="3-8" type="checkbox"  onclick="check(this.id)"/>3-8</td>
              </tr>
              <tr>
                <td><input id="4-1" value="4-1" type="checkbox"  onclick="check(this.id)"/>4-1</td>
                <td><input id="4-2" value="4-2" type="checkbox"  onclick="check(this.id)"/>4-2</td>
                <td><input id="4-3" value="4-3" type="checkbox"  onclick="check(this.id)"/>4-3</td>
                <td><input id="4-4" value="4-4" type="checkbox"  onclick="check(this.id)"/>4-4</td>
                <td><input id="4-5" value="4-5" type="checkbox"  onclick="check(this.id)"/>4-5</td>
                <td><input id="4-6" value="4-6" type="checkbox"  onclick="check(this.id)"/>4-6</td>
                <td><input id="4-7" value="4-7" type="checkbox"  onclick="check(this.id)"/>4-7</td>
                <td><input id="4-8" value="4-8" type="checkbox"  onclick="check(this.id)"/>4-8</td>
              </tr>
              <tr>
                <td><input id="5-1" value="5-1" type="checkbox"  onclick="check(this.id)"/>5-1</td>
                <td><input id="5-2" value="5-2" type="checkbox"  onclick="check(this.id)"/>5-2</td>
                <td><input id="5-3" value="5-3" type="checkbox"  onclick="check(this.id)"/>5-3</td>
                <td><input id="5-4" value="5-4" type="checkbox"  onclick="check(this.id)"/>5-4</td>
                <td><input id="5-5" value="5-5" type="checkbox"  onclick="check(this.id)"/>5-5</td>
                <td><input id="5-6" value="5-6" type="checkbox"  onclick="check(this.id)"/>5-6</td>
                <td><input id="5-7" value="5-7" type="checkbox"  onclick="check(this.id)"/>5-7</td>
                <td><input id="5-8" value="5-8" type="checkbox"  onclick="check(this.id)"/>5-8</td>
              </tr>
            </table>
            <input type="button" value="예매하기" onclick="submit1()" />
          </div>
        </div>
      </form>
    </div>
    <hr />
    <footer>
      <div class="footer_top">
        질문이 있으신가요? 문의 전화 080-1234-5678<br />학번 : 201702218<br />이름
        : 원동현<br />학과 : 수학과
      </div>
      <div class="footer_mid">
        <img src="media/marvelfooter.png" alt="marvel" />
      </div>
    </footer>
	<script type="text/javascript">
		var checkarr=new Array();
		var people=0
		function submit1() {
			if(people>document.getElementById("num").value){
				alert("입력한 인원보다 많이 좌석을 선택했습니다.");
				return;
			}
			if(people<document.getElementById("num").value){
				alert("좌석을 더 선택해주세요");
				return;
			}
			var arr = new Array();
			var ls=window.localStorage;
			D=document.getElementById("date_movie").value;
			for(var i=0;i<ls.length;i++){
				if(D==ls.key(i)){
				alert("다른 시간을 선택해주세요");
				return;
				}
			}
			arr[0] =document.getElementById("movie_name").value;
			arr[1] = document.getElementById("num").value;
			for(var i=0;i<checkarr.length;i++){
				arr.push(checkarr[i]);
			}
			ls.setItem(D,arr);
			alert("금액은 "+Number(document.getElementById("num").value)*8000+"원 입니다.");
	  }
	  function check(id){
		var a=document.getElementById(id)
		if(checkarr.indexOf(a.value)==-1){
			people+=1;
			if(people>document.getElementById("num").value){
			alert("입력한 인원보다 많이 좌석을 선택했습니다.")
			}
			checkarr.push(a.value);
		}
		else{
		checkarr.splice(checkarr.indexOf(a.value),1);
		people-=1;
		}
	  }
	</script>
</body>
</html>
